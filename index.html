<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªØ­Ø¯Ù‘ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨ | Ù…Ø­Ù…Ø¯ - Ø¢Ø³ÙŠØ© - Ø³Ù„Ø³Ø¨ÙŠÙ„</title>
  <style>
    :root{
      --bg1:#f7fbff;
      --bg2:#fff7fb;
      --card:#ffffffcc;
      --ink:#0b1b2b;
      --muted:#5b6b7a;
      --primary:#2b7cff;
      --primary2:#6c3bff;
      --good:#1aa36f;
      --bad:#ff4d5a;
      --warn:#ffb020;
      --shadow: 0 18px 40px rgba(15,35,55,.12);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 20% 10%, #dff1ff 0%, transparent 60%),
        radial-gradient(900px 650px at 80% 20%, #f4ddff 0%, transparent 60%),
        radial-gradient(900px 650px at 40% 90%, #ffe6ef 0%, transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }
    .app{width:min(1120px, 100%)}
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap:wrap}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{
      width:44px;height:44px;border-radius:14px;
      background: linear-gradient(135deg, var(--primary), var(--primary2));
      box-shadow: var(--shadow);
      display:grid;place-items:center;color:white;font-weight:900;
    }
    .brand h1{margin:0;font-size:18px;line-height:1.2}
    .brand .sub{font-size:12px;color:var(--muted);margin-top:2px}
    .pill{
      background: #ffffffb0;
      border:1px solid rgba(20,40,60,.08);
      padding:10px 12px;
      border-radius:999px;
      box-shadow: 0 10px 24px rgba(15,35,55,.08);
      display:flex;gap:10px;align-items:center;color:var(--muted);
      font-size:13px;flex-wrap:wrap
    }
    .grid{display:grid;grid-template-columns: 1.2fr .8fr;gap:16px}
    @media (max-width: 900px){.grid{grid-template-columns:1fr}}

    .card{
      background: var(--card);
      border: 1px solid rgba(20,40,60,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .card .hd{padding:18px 18px 10px;display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .card .hd h2{margin:0;font-size:18px}
    .card .hd p{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.6}
    .card .bd{padding:14px 18px 18px}

    .btns{display:flex;gap:10px;flex-wrap:wrap}
    button{
      border:0;border-radius: 14px;padding:12px 14px;
      font-weight:1000;cursor:pointer;transition: transform .08s ease, filter .2s ease;
      font-size:14px;
    }
    button:active{transform: translateY(1px) scale(.99)}
    .btn-primary{
      background: linear-gradient(135deg, var(--primary), var(--primary2));
      color:white;
      box-shadow: 0 14px 26px rgba(43,124,255,.25);
    }
    .btn-ghost{
      background:#ffffffc8;
      border:1px solid rgba(20,40,60,.12);
      color:var(--ink);
    }
    .btn-danger{
      background: linear-gradient(135deg, #ff4d5a, #ff7a3d);
      color:white;
      box-shadow: 0 14px 26px rgba(255,77,90,.22);
    }

    .badge{
      font-size:12px;padding:6px 10px;border-radius:999px;
      background: #eef5ff;border:1px solid rgba(43,124,255,.15);
      color:#1b4aa8;font-weight:1000;white-space:nowrap;
    }
    .mutebadge{background:#f7f7f9;border:1px solid rgba(20,40,60,.10);color:var(--muted)}

    /* Controls */
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .seg{
      display:flex;gap:6px;align-items:center;
      padding:8px;border-radius:16px;
      background:#ffffffb8;border:1px solid rgba(20,40,60,.10);
      flex-wrap:wrap;
    }
    .seg label{font-size:12px;color:var(--muted);font-weight:1000;margin-inline:6px}
    .seg button{padding:10px 12px;border-radius:12px;font-size:13px}
    .seg .active{
      background: linear-gradient(135deg, var(--primary), var(--primary2));
      color:#fff;border:0;
    }

    /* Characters list (kids) */
    .chars{display:grid;grid-template-columns: repeat(3, 1fr);gap:12px;margin-top:10px}
    @media (max-width: 560px){.chars{grid-template-columns:1fr}}

    .char{
      border-radius: 18px;border:1px solid rgba(20,40,60,.10);
      background:#ffffffb8;padding:12px;
      display:flex;gap:10px;align-items:center;
      cursor:pointer;user-select:none;
      transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
      overflow:hidden;
      position:relative;
    }
    .char:hover{transform: translateY(-2px);box-shadow: 0 16px 34px rgba(15,35,55,.12);filter:saturate(1.05)}

    .avatar{
      width:60px;height:60px;border-radius:18px;display:grid;place-items:center;
      background: radial-gradient(circle at 30% 20%, #fff 0%, #f2f7ff 55%, #eaf0ff 100%);
      border:1px solid rgba(20,40,60,.10);overflow:hidden;flex:0 0 auto;
    }
    .avatar svg{width:56px;height:56px;display:block}

    .meta{
      display:flex;flex-direction:column;
      min-width:0;
      flex:1;
    }

    /* FIX Ø§Ù„Ø§Ø³Ù…Ø§Ø¡: Ø®Ù„ÙÙŠØ© Ø®ÙÙŠÙØ© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© + Ù…Ù†Ø¹ Ù‚Øµ */
    .nameLine{
      display:inline-flex;
      align-items:center;
      gap:8px;
      width:fit-content;
      max-width:100%;
      padding:6px 10px;
      border-radius:12px;
      background: #ffffffd8;
      border:1px solid rgba(20,40,60,.10);
      box-shadow: 0 10px 18px rgba(15,35,55,.06);
    }
    .nm{
      font-weight:1000;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:100%;
    }
    .mode{
      font-size:12px;color:var(--muted);
      margin-top:6px;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis
    }
    .rightBadge{flex:0 0 auto}

    .divider{height:1px;background:rgba(20,40,60,.10);margin:10px 0}
    .footerNote{margin-top:10px;font-size:12px;color:var(--muted);line-height:1.6}

    /* Avatar Picker */
    .picker{
      margin-top:12px;
      padding:12px;
      border-radius:18px;
      border:1px solid rgba(20,40,60,.10);
      background:#ffffffb8;
    }
    .pickerTop{
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
      margin-bottom:10px;
    }
    .pickerTitle{
      font-weight:1000;
      display:flex;align-items:center;gap:10px;flex-wrap:wrap;
    }
    .pickerGrid{
      display:grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap:10px;
    }
    @media (max-width: 900px){.pickerGrid{grid-template-columns: repeat(4, minmax(0, 1fr));}}
    @media (max-width: 640px){.pickerGrid{grid-template-columns: repeat(3, minmax(0, 1fr));}}
    .avItem{
      border-radius:16px;
      border:1px solid rgba(20,40,60,.12);
      background:#fff;
      box-shadow: 0 10px 18px rgba(15,35,55,.06);
      padding:10px;
      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:center;
      cursor:pointer;
      user-select:none;
      transition:.12s ease;
    }
    .avItem:hover{transform: translateY(-2px)}
    .avItem.active{
      outline: 3px solid rgba(43,124,255,.25);
      border-color: rgba(43,124,255,.35);
    }
    .avThumb{
      width:64px;height:64px;border-radius:18px;
      background: radial-gradient(circle at 30% 20%, #fff 0%, #f2f7ff 55%, #eaf0ff 100%);
      border:1px solid rgba(20,40,60,.10);
      display:grid;place-items:center;
      overflow:hidden;
    }
    .avThumb svg{width:58px;height:58px}
    .avLabel{
      font-size:12px;
      font-weight:1000;
      color:var(--muted);
      text-align:center;
      line-height:1.2;
      max-width:100%;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* Quiz */
    .quizBox{
      background:#ffffffb8;border:1px solid rgba(20,40,60,.10);
      border-radius: 18px;padding:14px;
    }
    .quizTop{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:10px;flex-wrap:wrap}
    .qtitle{display:flex;flex-direction:column;gap:2px}
    .qtitle .who{font-weight:1000}
    .qtitle .desc{font-size:12px;color:var(--muted)}
    .progress{font-size:12px;color:var(--muted);white-space:nowrap}
    .q{font-size:34px;font-weight:1000;letter-spacing:.5px;margin:10px 0 12px;text-align:center}
    .timerWrap{display:flex;align-items:center;gap:10px;margin: 0 0 10px}
    .bar{height:10px;flex:1;border-radius:999px;background: rgba(20,40,60,.10);overflow:hidden}
    .bar > div{
      height:100%;width:100%;
      background: linear-gradient(90deg, var(--good), var(--warn), var(--bad));
      transform-origin: right center;transform: scaleX(1);
      transition: transform .2s linear;
    }
    .sec{min-width:58px;text-align:center;font-weight:1000;color:var(--muted)}

    .choices{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:10px;
      margin-top:12px;
    }
    @media (max-width: 520px){.choices{grid-template-columns:1fr}}
    .choiceBtn{
      background:#ffffff;
      border:1px solid rgba(20,40,60,.14);
      box-shadow: 0 10px 18px rgba(15,35,55,.06);
      text-align:center;
      padding:14px 12px;
      border-radius:16px;
      font-size:18px;
      font-weight:1000;
    }
    .choiceBtn:disabled{opacity:.85;cursor:not-allowed}
    .choiceBtn.correct{background:#eafff5;border-color: rgba(26,163,111,.25);color:#0d6f4a}
    .choiceBtn.wrong{background:#fff0f1;border-color: rgba(255,77,90,.25);color:#a61d2a}

    .toast{margin-top:10px;padding:10px 12px;border-radius:14px;font-weight:1000;text-align:center;display:none}
    .toast.ok{display:block;background:#eafff5;border:1px solid rgba(26,163,111,.20);color:#0d6f4a}
    .toast.no{display:block;background:#fff0f1;border:1px solid rgba(255,77,90,.20);color:#a61d2a}
    .toast.warn{display:block;background:#fff7e6;border:1px solid rgba(255,176,32,.25);color:#7a4d00}

    /* Right board */
    .scoreboard{display:flex;flex-direction:column;gap:12px}
    .row{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:12px 14px;border-radius: 16px;background:#ffffffb8;border:1px solid rgba(20,40,60,.10);
      flex-wrap:wrap;
    }
    .row .left{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .pts{font-weight:1000;font-size:16px}
    .small{font-size:12px;color:var(--muted);font-weight:1000}
    .rank{display:grid;gap:10px;margin-top:12px}
    .rankItem{
      padding:12px 14px;border-radius:16px;background:#ffffffb8;border:1px solid rgba(20,40,60,.10);
      display:flex;justify-content:space-between;align-items:center;gap:12px;font-weight:1000;
    }
    .rankItem .pos{
      width:32px;height:32px;border-radius:12px;display:grid;place-items:center;
      background:#eef5ff;border:1px solid rgba(43,124,255,.15);color:#1b4aa8;
    }

    .hidden{display:none !important}
  </style>
</head>

<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">
        <div class="logo">+</div>
        <div>
          <h1>ØªØ­Ø¯Ù‘ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù„Ù„Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„Ø«Ù„Ø§Ø«Ø©</h1>
          <div class="sub">Ù¥ Ø£Ø³Ø¦Ù„Ø© â€” ÙˆÙ‚Øª ØªØ®ØªØ§Ø±Ù‡ â€” Ø§Ø®ØªÙŠØ§Ø±Ø§Øª â€” Ø£Ø±Ù‚Ø§Ù… Ø¹Ø±Ø¨ÙŠØ© â€” Ø§Ø®ØªÙŠØ§Ø± Ø£ÙØ§ØªØ§Ø±</div>
        </div>
      </div>

      <div class="pill" id="pillStatus">
        Ø¬Ø§Ù‡Ø²ÙŠÙ†ØŸ Ø§Ø®ØªØ± Ù…ØªØ³Ø§Ø¨Ù‚ ÙˆØ§Ø¨Ø¯Ø£ ğŸ‘‡
        <span class="badge mutebadge" id="pillTime">Ø§Ù„ÙˆÙ‚Øª: Ù¡Ù  Ø«</span>
      </div>
    </div>

    <div class="grid">
      <!-- Left -->
      <div class="card">
        <div class="hd">
          <div>
            <h2 id="mainTitle">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
            <p id="mainDesc">Ø§Ø®ØªÙØ± ÙˆÙ‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„ØŒ Ø«Ù… Ø§Ø®ØªÙØ± Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ØŒ ÙˆØ¨Ø¹Ø¯Ù‡Ø§ ØªÙ‚Ø¯Ø± ØªØ®ØªØ§Ø± Ø§Ù„Ø£ÙØ§ØªØ§Ø±.</p>
          </div>
          <div class="btns">
            <button class="btn-ghost" id="btnHome">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <button class="btn-danger" id="btnReset">ğŸ§¹ ØªØµÙÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
          </div>
        </div>

        <div class="bd">
          <!-- HOME -->
          <div id="homeView">
            <div class="controls">
              <div class="seg" aria-label="ÙˆÙ‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„">
                <label>ÙˆÙ‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„</label>
                <button class="btn-ghost" data-time="5"  id="t_5">Ù¥ Ø«</button>
                <button class="btn-ghost active" data-time="10" id="t_10">Ù¡Ù  Ø«</button>
                <button class="btn-ghost" data-time="15" id="t_15">Ù¡Ù¥ Ø«</button>
                <button class="btn-ghost" data-time="20" id="t_20">Ù¢Ù  Ø«</button>
              </div>
              <div class="seg">
                <label>Ø§Ù„ØªØ³Ø¬ÙŠÙ„</label>
                <span class="badge">ÙƒÙ„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© = Ù¢</span>
                <span class="badge mutebadge">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ù† Ù¡Ù </span>
              </div>
            </div>

            <div class="chars">
              <div class="char" data-char="mohammed">
                <div class="avatar" id="kidAv_mohammed" aria-hidden="true"></div>
                <div class="meta">
                  <div class="nameLine"><span class="nm">Ù…Ø­Ù…Ø¯</span></div>
                  <div class="mode">Ø¬Ù…Ø¹ (Ù  Ø¥Ù„Ù‰ Ù¢Ù )</div>
                </div>
                <span class="badge rightBadge" id="badge_mohammed">â€”</span>
              </div>

              <div class="char" data-char="asia">
                <div class="avatar" id="kidAv_asia" aria-hidden="true"></div>
                <div class="meta">
                  <div class="nameLine"><span class="nm">Ø¢Ø³ÙŠØ©</span></div>
                  <div class="mode">Ø¶Ø±Ø¨ (Ù¡ Ø¥Ù„Ù‰ Ù¡Ù )</div>
                </div>
                <span class="badge rightBadge" id="badge_asia">â€”</span>
              </div>

              <div class="char" data-char="salsabil">
                <div class="avatar" id="kidAv_salsabil" aria-hidden="true"></div>
                <div class="meta">
                  <div class="nameLine"><span class="nm">Ø³Ù„Ø³Ø¨ÙŠÙ„</span></div>
                  <div class="mode">Ø¶Ø±Ø¨ (Ù¡ Ø¥Ù„Ù‰ Ù¡Ù )</div>
                </div>
                <span class="badge rightBadge" id="badge_salsabil">â€”</span>
              </div>
            </div>

            <!-- Avatar Picker -->
            <div class="picker" id="pickerBox">
              <div class="pickerTop">
                <div class="pickerTitle">
                  ğŸ­ Ø§Ø®ØªØ± Ø£ÙØ§ØªØ§Ø± Ù„Ù€ <span class="badge" id="pickerKidName">â€”</span>
                  <span class="badge mutebadge" id="pickerHint">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙØ§ØªØ§Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±</span>
                </div>
                <div class="btns">
                  <button class="btn-primary" id="btnStartAfterPick">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© â–¶ï¸</button>
                </div>
              </div>
              <div class="pickerGrid" id="pickerGrid"></div>
              <div class="footerNote">
                âœ… ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø£ÙØ§ØªØ§Ø± â€œØ¨Ø·Ù„ Ø¹Ù†ÙƒØ¨ÙˆØªÙŠâ€ Ù„Ù…Ø­Ù…Ø¯ØŒ Ùˆâ€œÙƒØ§Ø¦Ù† Ø£Ø²Ø±Ù‚ Ù„Ø·ÙŠÙâ€ Ù„Ø¢Ø³ÙŠØ©ØŒ Ùˆâ€œØ£Ø±Ù†Ø¨ Ù„Ø·ÙŠÙ Ø¨Ù‚Ø¨Ø¹Ø©â€ Ù„Ø³Ù„Ø³Ø¨ÙŠÙ„ Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ.
                Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ ØµÙˆØ±Ù‡Ù… Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø£Ø±Ø³Ù„Ù‡Ø§ Ù„ÙŠ ÙˆØ£Ø¨Ø¯Ù‘Ù„Ù‡Ø§ Ù„Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø©.
              </div>
            </div>

            <div class="divider"></div>
            <div class="footerNote">âœ… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²ØŒ ÙˆÙŠØ¸Ù‡Ø± ØªØ±ØªÙŠØ¨ Ø¨Ø¹Ø¯ Ù…Ø§ ÙŠÙ„Ø¹Ø¨ÙˆÙ† Ø§Ù„Ø«Ù„Ø§Ø«Ø©.</div>
          </div>

          <!-- QUIZ -->
          <div id="quizView" class="hidden">
            <div class="quizBox">
              <div class="quizTop">
                <div class="qtitle">
                  <div class="who" id="whoName">â€”</div>
                  <div class="desc" id="whoDesc">â€”</div>
                </div>
                <div class="progress" id="progressText">â€”</div>
              </div>

              <div class="timerWrap">
                <div class="bar" aria-hidden="true"><div id="barFill"></div></div>
                <div class="sec"><span id="secLeft">Ù¡Ù </span> Ø«</div>
              </div>

              <div class="q" id="questionText">â€”</div>
              <div class="choices" id="choices"></div>
              <div id="toast" class="toast">â€”</div>
            </div>

            <div class="btns" style="margin-top:12px">
              <button class="btn-ghost" id="btnBack">â¬…ï¸ Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            </div>
          </div>

          <!-- RESULT -->
          <div id="resultView" class="hidden">
            <div class="quizBox">
              <div class="q" style="font-size:26px;margin:6px 0 10px" id="resultTitle">Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø© ğŸ‰</div>
              <div style="text-align:center;color:var(--muted);font-weight:1000" id="resultSub">â€”</div>
              <div class="divider"></div>
              <div class="btns" style="justify-content:center">
                <button class="btn-primary" id="btnToHome2">Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ³Ø§Ø¨Ù‚ Ø¢Ø®Ø± ğŸ‘¤</button>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Right -->
      <div class="card">
        <div class="hd">
          <div>
            <h2>Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©</h2>
            <p>Ø¢Ø®Ø± Ù†ØªÙŠØ¬Ø© Ù„ÙƒÙ„ Ø·ÙÙ„ (Ù…Ù† Ù¡Ù ) + ØªØ±ØªÙŠØ¨ Ø¨Ø¹Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø«Ù„Ø§Ø«Ø©.</p>
          </div>
        </div>

        <div class="bd">
          <div class="scoreboard">
            <div class="row">
              <div class="left"><span class="badge">Ù…Ø­Ù…Ø¯</span><span class="small">Ø¬Ù…Ø¹</span></div>
              <div class="pts" id="score_mohammed">â€”</div>
            </div>
            <div class="row">
              <div class="left"><span class="badge">Ø¢Ø³ÙŠØ©</span><span class="small">Ø¶Ø±Ø¨</span></div>
              <div class="pts" id="score_asia">â€”</div>
            </div>
            <div class="row">
              <div class="left"><span class="badge">Ø³Ù„Ø³Ø¨ÙŠÙ„</span><span class="small">Ø¶Ø±Ø¨</span></div>
              <div class="pts" id="score_salsabil">â€”</div>
            </div>

            <div class="divider"></div>

            <div id="rankBox" class="hidden">
              <div style="font-weight:1000;margin-bottom:8px">ğŸ† Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>
              <div class="rank" id="rankList"></div>
            </div>

            <div class="footerNote">ğŸ§¹ Ù„ØªØµÙÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ø¶ØºØ· â€œØªØµÙÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬â€.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
(() => {
  // ======= Constants =======
  const Q_COUNT = 5;
  const storageKey = "kids_math_scores_v4";
  const avatarKey = "kids_avatars_v1";

  const CHAR = {
    mohammed: { name: "Ù…Ø­Ù…Ø¯", desc: "Ø¬Ù…Ø¹ Ù„Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ù…Ù† Ù  Ø¥Ù„Ù‰ Ù¢Ù ", mode: "add" },
    asia:     { name: "Ø¢Ø³ÙŠØ©", desc: "Ø¶Ø±Ø¨ Ù„Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ù…Ù† Ù¡ Ø¥Ù„Ù‰ Ù¡Ù ", mode: "mul" },
    salsabil: { name: "Ø³Ù„Ø³Ø¨ÙŠÙ„", desc: "Ø¶Ø±Ø¨ Ù„Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ù…Ù† Ù¡ Ø¥Ù„Ù‰ Ù¡Ù ", mode: "mul" },
  };

  // ======= Arabic-Indic digits =======
  const arabicDigits = ["Ù ","Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©"];
  function toArabicIndic(str){
    return String(str).replace(/\d/g, d => arabicDigits[Number(d)]);
  }
  function fromArabicIndic(str){
    // converts arabic-indic digits in a string to western digits then Number
    const western = String(str).replace(/[Ù -Ù©]/g, ch => String(arabicDigits.indexOf(ch)));
    return Number(western);
  }

  // ======= Cute original SVG avatars (placeholders) =======
  // Note: These are original simple SVGs, inspired "style", not official copyrighted art.
  const AVATARS = [
    { id:"spider_hero", label:"Ø¨Ø·Ù„ Ø¹Ù†ÙƒØ¨ÙˆØªÙŠ", svg: spiderHeroSVG() },      // Ù…Ø­Ù…Ø¯ (Ø¨Ø¯ÙŠÙ„ Ø³Ø¨Ø§ÙŠØ¯Ø±Ù…Ø§Ù†)
    { id:"blue_alien",  label:"ÙƒØ§Ø¦Ù† Ø£Ø²Ø±Ù‚ Ù„Ø·ÙŠÙ", svg: blueAlienSVG() },   // Ø¢Ø³ÙŠØ© (Ø¨Ø¯ÙŠÙ„ Ø³ØªÙŠØªØ´)
    { id:"cute_bunny",  label:"Ø£Ø±Ù†Ø¨ Ù„Ø·ÙŠÙ Ø¨Ù‚Ø¨Ø¹Ø©", svg: cuteBunnySVG() },  // Ø³Ù„Ø³Ø¨ÙŠÙ„ (Ø¨Ø¯ÙŠÙ„ ÙƒØ±ÙˆÙ…ÙŠ)
    { id:"robot",       label:"Ø±ÙˆØ¨ÙˆØª", svg: robotSVG() },
    { id:"lion",        label:"Ø£Ø³Ø¯", svg: lionSVG() },
    { id:"cat",         label:"Ù‚Ø·Ø©", svg: catSVG() },
    { id:"panda",       label:"Ø¨Ø§Ù†Ø¯Ø§", svg: pandaSVG() },
    { id:"star",        label:"Ù†Ø¬Ù…Ø©", svg: starSVG() },
    { id:"rocket",      label:"ØµØ§Ø±ÙˆØ®", svg: rocketSVG() },
    { id:"unicorn",     label:"ÙŠÙˆÙ†ÙŠÙƒÙˆØ±Ù†", svg: unicornSVG() },
  ];

  // ======= State =======
  let currentChar = null;
  let questions = [];
  let idx = 0;
  let points = 0;
  let timer = null;
  let secLeft = 10;
  let secPerQ = 10;

  let selectedKidForPicker = "mohammed";

  // ======= DOM =======
  const pillStatus = document.getElementById("pillStatus");
  const pillTime = document.getElementById("pillTime");

  const homeView = document.getElementById("homeView");
  const quizView = document.getElementById("quizView");
  const resultView = document.getElementById("resultView");

  const whoName = document.getElementById("whoName");
  const whoDesc = document.getElementById("whoDesc");
  const progressText = document.getElementById("progressText");
  const questionText = document.getElementById("questionText");
  const choicesEl = document.getElementById("choices");

  const secLeftEl = document.getElementById("secLeft");
  const barFill = document.getElementById("barFill");
  const toast = document.getElementById("toast");

  const resultTitle = document.getElementById("resultTitle");
  const resultSub = document.getElementById("resultSub");

  const btnBack = document.getElementById("btnBack");
  const btnHome = document.getElementById("btnHome");
  const btnReset = document.getElementById("btnReset");
  const btnToHome2 = document.getElementById("btnToHome2");

  const scoreMoh = document.getElementById("score_mohammed");
  const scoreAsia = document.getElementById("score_asia");
  const scoreSal = document.getElementById("score_salsabil");

  const badgeMoh = document.getElementById("badge_mohammed");
  const badgeAsia = document.getElementById("badge_asia");
  const badgeSal = document.getElementById("badge_salsabil");

  const rankBox = document.getElementById("rankBox");
  const rankList = document.getElementById("rankList");

  const kidAvMoh = document.getElementById("kidAv_mohammed");
  const kidAvAsia = document.getElementById("kidAv_asia");
  const kidAvSal = document.getElementById("kidAv_salsabil");

  const pickerKidName = document.getElementById("pickerKidName");
  const pickerGrid = document.getElementById("pickerGrid");
  const btnStartAfterPick = document.getElementById("btnStartAfterPick");

  // Time buttons
  const timeBtns = {
    5:  document.getElementById("t_5"),
    10: document.getElementById("t_10"),
    15: document.getElementById("t_15"),
    20: document.getElementById("t_20"),
  };

  // ======= Helpers =======
  const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
  const randint = (a, b) => Math.floor(Math.random() * (b - a + 1)) + a;

  function loadScores(){
    try{ return JSON.parse(localStorage.getItem(storageKey) || "{}"); }
    catch{ return {}; }
  }
  function saveScores(s){ localStorage.setItem(storageKey, JSON.stringify(s)); }

  function loadAvatars(){
    try{ return JSON.parse(localStorage.getItem(avatarKey) || "{}"); }
    catch{ return {}; }
  }
  function saveAvatars(a){ localStorage.setItem(avatarKey, JSON.stringify(a)); }

  function setView(which){
    homeView.classList.add("hidden");
    quizView.classList.add("hidden");
    resultView.classList.add("hidden");
    which.classList.remove("hidden");
  }

  function showToast(kind, msg){
    toast.className = "toast " + kind;
    toast.textContent = msg;
    setTimeout(() => { toast.className = "toast"; toast.textContent = "â€”"; }, 900);
  }

  function setTimePerQuestion(sec){
    secPerQ = sec;
    Object.keys(timeBtns).forEach(k => timeBtns[k].classList.toggle("active", Number(k) === sec));
    pillTime.textContent = `Ø§Ù„ÙˆÙ‚Øª: ${toArabicIndic(sec)} Ø«`;
  }

  function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  // Unique operation keys per round
  function makeKeyAdd(a,b){
    const x = Math.min(a,b), y = Math.max(a,b);
    return `add:${x}+${y}`;
  }
  function makeKeyMul(a,b){
    const x = Math.min(a,b), y = Math.max(a,b);
    return `mul:${x}x${y}`;
  }

  function makeChoices(correct, mode){
    const s = new Set([correct]);
    while(s.size < 4){
      let cand;
      if(mode === "add"){
        const delta = randint(-6, 6);
        cand = correct + delta;
        if(cand < 0) cand = Math.abs(cand);
      } else {
        const delta = randint(-10, 10);
        cand = correct + delta;
        if(cand < 0) cand = Math.abs(cand);
      }
      s.add(cand);
    }
    return shuffle([...s]);
  }

  function generateQuestions(charKey){
    const mode = CHAR[charKey].mode;
    const used = new Set();
    const qs = [];

    while(qs.length < Q_COUNT){
      let a,b,ans,text,key;

      if(mode === "add"){
        a = randint(0,20);
        b = randint(0,20);
        ans = a + b;
        key = makeKeyAdd(a,b);
        text = `${toArabicIndic(a)} + ${toArabicIndic(b)} = ØŸ`;
      } else {
        a = randint(1,10);
        b = randint(1,10);
        ans = a * b;
        key = makeKeyMul(a,b);
        text = `${toArabicIndic(a)} Ã— ${toArabicIndic(b)} = ØŸ`;
      }

      if(used.has(key)) continue;
      used.add(key);

      const choices = makeChoices(ans, mode).map(n => toArabicIndic(n));
      qs.push({ text, answer: ans, key, choices });
    }
    return qs;
  }

  function updateTimerUI(){
    secLeftEl.textContent = toArabicIndic(clamp(secLeft,0,secPerQ));
    const ratio = clamp(secLeft / secPerQ, 0, 1);
    barFill.style.transform = `scaleX(${ratio})`;
  }

  function stopTimer(){
    if(timer){ clearInterval(timer); timer = null; }
  }

  function disableChoices(){
    [...choicesEl.querySelectorAll("button")].forEach(b => b.disabled = true);
  }

  function startTimer(){
    stopTimer();
    secLeft = secPerQ;
    updateTimerUI();
    timer = setInterval(() => {
      secLeft -= 1;
      updateTimerUI();
      if(secLeft <= 0){
        stopTimer();
        disableChoices();
        showToast("warn", "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª â±ï¸");
        setTimeout(() => nextQuestion(false, true), 350);
      }
    }, 1000);
  }

  function renderQuestion(){
    const q = questions[idx];
    progressText.textContent = `Ø³Ø¤Ø§Ù„ ${toArabicIndic(idx+1)} Ù…Ù† ${toArabicIndic(Q_COUNT)}`;
    questionText.textContent = q.text;

    choicesEl.innerHTML = "";
    q.choices.forEach((label) => {
      const btn = document.createElement("button");
      btn.className = "choiceBtn";
      btn.textContent = label;
      btn.addEventListener("click", () => chooseAnswer(label, q));
      choicesEl.appendChild(btn);
    });

    startTimer();
  }

  function chooseAnswer(label, q){
    stopTimer();
    disableChoices();

    const chosen = fromArabicIndic(label);
    const isCorrect = chosen === q.answer;

    [...choicesEl.querySelectorAll("button")].forEach(b => {
      const val = fromArabicIndic(b.textContent);
      if(val === q.answer) b.classList.add("correct");
      if(b.textContent === label && !isCorrect) b.classList.add("wrong");
    });

    if(isCorrect){
      points += 2;
      showToast("ok", "ØµØ­ âœ…");
    } else {
      showToast("no", "Ø®Ø·Ø£ âŒ");
    }

    setTimeout(() => nextQuestion(isCorrect, false), 550);
  }

  function nextQuestion(){
    idx += 1;
    if(idx >= Q_COUNT){
      finishRound();
    } else {
      renderQuestion();
    }
  }

  function startRound(charKey){
    currentChar = charKey;
    questions = generateQuestions(charKey);
    idx = 0;
    points = 0;

    whoName.textContent = `ğŸ‘¤ ${CHAR[charKey].name}`;
    whoDesc.textContent = `${CHAR[charKey].desc} â€” ÙˆÙ‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„: ${toArabicIndic(secPerQ)} Ø«`;

    pillStatus.firstChild.textContent = `Ø¨Ø¯Ø£Ù†Ø§! Ø¯ÙˆØ± ${CHAR[charKey].name} ğŸš€ `;
    setView(quizView);
    renderQuestion();
  }

  function finishRound(){
    stopTimer();
    const name = CHAR[currentChar].name;
    resultTitle.textContent = `Ø§Ù†ØªÙ‡Øª Ø¬ÙˆÙ„Ø© ${name} ğŸ‰`;
    resultSub.textContent = `Ø¯Ø±Ø¬ØªÙƒ: ${toArabicIndic(points)} Ù…Ù† ${toArabicIndic(10)} (ÙˆÙ‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„: ${toArabicIndic(secPerQ)} Ø«)`;

    const scores = loadScores();
    scores[currentChar] = { last: points, time: secPerQ, updatedAt: Date.now() };
    scores.updatedAt = Date.now();
    saveScores(scores);

    refreshBoard();
    pillStatus.firstChild.textContent = `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù†ØªÙŠØ¬Ø© ${name}: ${toArabicIndic(points)}/${toArabicIndic(10)} âœ… `;
    setView(resultView);
  }

  function refreshBoard(){
    const scores = loadScores();
    const vMoh  = scores.mohammed?.last ?? null;
    const vAsia = scores.asia?.last ?? null;
    const vSal  = scores.salsabil?.last ?? null;

    function fmt(v){ return v === null ? "â€”" : `${toArabicIndic(v)}/${toArabicIndic(10)}`; }

    scoreMoh.textContent  = fmt(vMoh);
    scoreAsia.textContent = fmt(vAsia);
    scoreSal.textContent  = fmt(vSal);

    badgeMoh.textContent  = vMoh  === null ? "Ù„Ù… ÙŠÙ„Ø¹Ø¨" : fmt(vMoh);
    badgeAsia.textContent = vAsia === null ? "Ù„Ù… ØªÙ„Ø¹Ø¨" : fmt(vAsia);
    badgeSal.textContent  = vSal  === null ? "Ù„Ù… ØªÙ„Ø¹Ø¨" : fmt(vSal);

    const allDone = [vMoh, vAsia, vSal].every(v => typeof v === "number");
    if(allDone){
      const arr = [
        { name:"Ù…Ø­Ù…Ø¯", score:vMoh },
        { name:"Ø¢Ø³ÙŠØ©", score:vAsia },
        { name:"Ø³Ù„Ø³Ø¨ÙŠÙ„", score:vSal },
      ].sort((a,b) => b.score - a.score);

      rankList.innerHTML = "";
      arr.forEach((it, i) => {
        const div = document.createElement("div");
        div.className = "rankItem";
        div.innerHTML = `
          <div style="display:flex;align-items:center;gap:10px">
            <div class="pos">${toArabicIndic(i+1)}</div>
            <div>${it.name}</div>
          </div>
          <div>${toArabicIndic(it.score)}/${toArabicIndic(10)}</div>
        `;
        rankList.appendChild(div);
      });
      rankBox.classList.remove("hidden");
    } else {
      rankBox.classList.add("hidden");
      rankList.innerHTML = "";
    }

    // refresh kid avatars
    renderKidAvatars();
  }

  function goHome(){
    stopTimer();
    currentChar = null;
    questions = [];
    idx = 0;
    points = 0;
    pillStatus.firstChild.textContent = "Ø¬Ø§Ù‡Ø²ÙŠÙ†ØŸ Ø§Ø®ØªØ± Ù…ØªØ³Ø§Ø¨Ù‚ ÙˆØ§Ø¨Ø¯Ø£ ğŸ‘‡ ";
    setView(homeView);
  }

  function resetAll(){
    stopTimer();
    localStorage.removeItem(storageKey);
    localStorage.removeItem(avatarKey);
    initDefaultAvatars();
    refreshBoard();
    goHome();
    pillStatus.firstChild.textContent = "ØªÙ… ØªØµÙÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ âœ… ";
  }

  // ======= Avatar selection logic =======
  function initDefaultAvatars(){
    const a = loadAvatars();
    // defaults: Ù…Ø­Ù…Ø¯=spider_hero, Ø¢Ø³ÙŠØ©=blue_alien, Ø³Ù„Ø³Ø¨ÙŠÙ„=cute_bunny
    if(!a.mohammed) a.mohammed = "spider_hero";
    if(!a.asia) a.asia = "blue_alien";
    if(!a.salsabil) a.salsabil = "cute_bunny";
    saveAvatars(a);
  }

  function getAvatarById(id){
    return AVATARS.find(x => x.id === id) || AVATARS[0];
  }

  function renderAvatarInto(el, avatarId){
    const av = getAvatarById(avatarId);
    el.innerHTML = av.svg;
  }

  function renderKidAvatars(){
    const a = loadAvatars();
    renderAvatarInto(kidAvMoh, a.mohammed);
    renderAvatarInto(kidAvAsia, a.asia);
    renderAvatarInto(kidAvSal, a.salsabil);
  }

  function openPickerForKid(kidKey){
    selectedKidForPicker = kidKey;
    pickerKidName.textContent = CHAR[kidKey].name;
    renderPickerGrid();
  }

  function renderPickerGrid(){
    const a = loadAvatars();
    const activeId = a[selectedKidForPicker];

    pickerGrid.innerHTML = "";
    AVATARS.forEach(av => {
      const item = document.createElement("div");
      item.className = "avItem" + (av.id === activeId ? " active" : "");
      item.innerHTML = `
        <div class="avThumb">${av.svg}</div>
        <div class="avLabel">${av.label}</div>
      `;
      item.addEventListener("click", () => {
        const aa = loadAvatars();
        aa[selectedKidForPicker] = av.id;
        saveAvatars(aa);
        renderKidAvatars();
        renderPickerGrid();
      });
      pickerGrid.appendChild(item);
    });
  }

  // ======= SVG generators (simple original icons) =======
  function spiderHeroSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <defs>
          <linearGradient id="sh" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#ff4d5a"/><stop offset="1" stop-color="#2b7cff"/>
          </linearGradient>
        </defs>
        <circle cx="32" cy="32" r="18" fill="url(#sh)"/>
        <path d="M22 24c4-4 16-4 20 0" stroke="#111" stroke-width="3" stroke-linecap="round" fill="none" opacity=".85"/>
        <path d="M22 40c4 4 16 4 20 0" stroke="#111" stroke-width="3" stroke-linecap="round" fill="none" opacity=".85"/>
        <path d="M32 16v32" stroke="#111" stroke-width="2" opacity=".8"/>
        <path d="M20 32h24" stroke="#111" stroke-width="2" opacity=".8"/>
        <circle cx="26" cy="30" r="2.2" fill="#111"/>
        <circle cx="38" cy="30" r="2.2" fill="#111"/>
        <path d="M10 20l10 8M10 44l10-8M54 20l-10 8M54 44l-10-8" stroke="#111" stroke-width="2" stroke-linecap="round" opacity=".7"/>
      </svg>`;
  }
  function blueAlienSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <defs>
          <linearGradient id="ba" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#2b7cff"/><stop offset="1" stop-color="#1aa36f"/>
          </linearGradient>
        </defs>
        <circle cx="32" cy="34" r="18" fill="url(#ba)"/>
        <ellipse cx="18" cy="30" rx="10" ry="8" fill="#2b7cff" opacity=".55"/>
        <ellipse cx="46" cy="30" rx="10" ry="8" fill="#2b7cff" opacity=".55"/>
        <circle cx="26" cy="34" r="3" fill="#111"/>
        <circle cx="38" cy="34" r="3" fill="#111"/>
        <path d="M26 42c3 3 9 3 12 0" stroke="#0b1b2b" stroke-width="3" fill="none" stroke-linecap="round" opacity=".8"/>
        <path d="M22 18c2-6 6-10 10-10s8 4 10 10" stroke="#2b7cff" stroke-width="4" stroke-linecap="round" opacity=".6"/>
      </svg>`;
  }
  function cuteBunnySVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <defs>
          <linearGradient id="cb" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#6c3bff"/><stop offset="1" stop-color="#ff4d5a"/>
          </linearGradient>
        </defs>
        <rect x="18" y="6" width="10" height="20" rx="6" fill="#fff" stroke="rgba(20,40,60,.2)"/>
        <rect x="36" y="6" width="10" height="20" rx="6" fill="#fff" stroke="rgba(20,40,60,.2)"/>
        <circle cx="32" cy="36" r="18" fill="#fff" stroke="rgba(20,40,60,.2)"/>
        <path d="M18 26c6-10 22-10 28 0" fill="url(#cb)" opacity=".85"/>
        <circle cx="26" cy="36" r="2.6" fill="#111"/>
        <circle cx="38" cy="36" r="2.6" fill="#111"/>
        <path d="M30 42h4" stroke="#111" stroke-width="3" stroke-linecap="round"/>
        <path d="M24 46c4 4 12 4 16 0" stroke="#ff4d5a" stroke-width="3" stroke-linecap="round" fill="none" opacity=".7"/>
      </svg>`;
  }
  function robotSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <rect x="16" y="18" width="32" height="28" rx="10" fill="#eef5ff" stroke="rgba(20,40,60,.2)"/>
        <circle cx="26" cy="32" r="3" fill="#111"/>
        <circle cx="38" cy="32" r="3" fill="#111"/>
        <path d="M26 40h12" stroke="#111" stroke-width="3" stroke-linecap="round"/>
        <path d="M32 10v8" stroke="#6c3bff" stroke-width="4" stroke-linecap="round"/>
        <circle cx="32" cy="8" r="4" fill="#6c3bff"/>
      </svg>`;
  }
  function lionSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="32" cy="34" r="20" fill="#ffb020" opacity=".9"/>
        <circle cx="32" cy="36" r="14" fill="#ffd7b3"/>
        <circle cx="27" cy="34" r="2.5" fill="#111"/>
        <circle cx="37" cy="34" r="2.5" fill="#111"/>
        <path d="M30 40c2 2 2 2 4 0" stroke="#111" stroke-width="3" stroke-linecap="round" fill="none"/>
        <path d="M20 22l-6-4M44 22l6-4M20 48l-6 4M44 48l6 4" stroke="#c97a00" stroke-width="3" stroke-linecap="round" opacity=".7"/>
      </svg>`;
  }
  function catSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <path d="M18 26l6-10 8 8h0l8-8 6 10" fill="#fff" stroke="rgba(20,40,60,.2)"/>
        <circle cx="32" cy="38" r="18" fill="#fff" stroke="rgba(20,40,60,.2)"/>
        <circle cx="26" cy="38" r="2.5" fill="#111"/>
        <circle cx="38" cy="38" r="2.5" fill="#111"/>
        <path d="M30 44h4" stroke="#111" stroke-width="3" stroke-linecap="round"/>
        <path d="M16 40h10M38 40h10" stroke="#111" stroke-width="2" stroke-linecap="round" opacity=".6"/>
      </svg>`;
  }
  function pandaSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="22" cy="22" r="8" fill="#111"/>
        <circle cx="42" cy="22" r="8" fill="#111"/>
        <circle cx="32" cy="36" r="18" fill="#fff" stroke="rgba(20,40,60,.2)"/>
        <ellipse cx="26" cy="34" rx="6" ry="5" fill="#111" opacity=".8"/>
        <ellipse cx="38" cy="34" rx="6" ry="5" fill="#111" opacity=".8"/>
        <circle cx="26" cy="34" r="2" fill="#fff"/>
        <circle cx="38" cy="34" r="2" fill="#fff"/>
        <path d="M30 42h4" stroke="#111" stroke-width="3" stroke-linecap="round"/>
      </svg>`;
  }
  function starSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <path d="M32 10l7 14 15 2-11 11 3 16-14-7-14 7 3-16-11-11 15-2z"
              fill="#ffb020" stroke="rgba(20,40,60,.2)"/>
        <circle cx="26" cy="30" r="2.2" fill="#111"/>
        <circle cx="38" cy="30" r="2.2" fill="#111"/>
        <path d="M26 38c3 3 9 3 12 0" stroke="#111" stroke-width="3" fill="none" stroke-linecap="round"/>
      </svg>`;
  }
  function rocketSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <path d="M32 10c10 6 12 22 0 34C20 32 22 16 32 10z" fill="#2b7cff"/>
        <circle cx="32" cy="26" r="5" fill="#fff"/>
        <path d="M26 44l-6 10 12-6" fill="#6c3bff" opacity=".85"/>
        <path d="M38 44l6 10-12-6" fill="#6c3bff" opacity=".85"/>
        <path d="M32 44c2 6 0 10-4 14h8c-4-4-6-8-4-14z" fill="#ff4d5a" opacity=".9"/>
      </svg>`;
  }
  function unicornSVG(){
    return `
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="30" cy="36" r="16" fill="#fff" stroke="rgba(20,40,60,.2)"/>
        <path d="M22 26c4-6 14-8 20 0" fill="#ffe6ef" opacity=".9"/>
        <path d="M42 18l10-6-6 10" fill="#ffb020"/>
        <circle cx="26" cy="36" r="2.5" fill="#111"/>
        <circle cx="36" cy="36" r="2.5" fill="#111"/>
        <path d="M26 44c3 2 9 2 12 0" stroke="#ff4d5a" stroke-width="3" fill="none" stroke-linecap="round" opacity=".7"/>
      </svg>`;
  }

  // ======= Init default avatars =======
  function ensureDefaults(){
    initDefaultAvatars();
    renderKidAvatars();
    openPickerForKid("mohammed");
  }

  // ======= Events =======
  document.querySelectorAll(".char").forEach(el => {
    el.addEventListener("click", () => {
      const kid = el.getAttribute("data-char");
      // when clicking a kid card: open picker for that kid (and not start immediately)
      openPickerForKid(kid);
    });
  });

  Object.values(timeBtns).forEach(btn => {
    btn.addEventListener("click", () => setTimePerQuestion(Number(btn.dataset.time)));
  });

  btnStartAfterPick.addEventListener("click", () => {
    // start quiz for currently selected kid in picker
    startRound(selectedKidForPicker);
  });

  btnBack.addEventListener("click", goHome);
  btnHome.addEventListener("click", goHome);
  btnToHome2.addEventListener("click", goHome);
  btnReset.addEventListener("click", resetAll);

  // ======= Init =======
  setTimePerQuestion(10);
  ensureDefaults();
  refreshBoard();
})();
</script>
</body>
</html>
